@using Blog.Controllers
@model IEnumerable<object>
@{
    List<Blog.Models.Category> listCategory = Model.ToList()[0] as List<Blog.Models.Category>;
    List<Blog.Models.Article> listArticle = Model.ToList()[1] as List<Blog.Models.Article>;
}


<div class="container">

    <div class="row">

        @foreach (var category in listCategory)
            {
            <div class="col-md-2 text-center text-uppercase">
                <p>
                    
                    <h4>
                        @Html.ActionLink(string.Format($"{category.Name} "),
                            "ListArticles", "Home", new {@categoryId = category.Id}, null)
                    </h4>

                </p>
            </div>
        }

    </div>
</div>
<hr/>


<div class="container">

    <div class="row">
        <h4>Cars under 3000лв</h4>
        @foreach (var article in listArticle)
        {
            if (article.Price < 3000)
             {
                 <div class="col-md-3">
                     <article>
                         <header>
                             <h4>
                                @Html.ActionLink(@article.Title, "Details", "Article", new {@id = article.Id}, null)
                             </h4>
                         </header>
                         <p>

                             @if (article.Files.Any(f => f.FileType == FileType.Avatar))
                             {
                                 <a class="media-left" href="@Url.Action("Details", "Article", new {id = article.Id})">
                                     <img class="media-object" src="~/File?id=@article.Files.First(f => f.FileType == FileType.Avatar).FileId" alt="image" width="180"/>
                                 </a>
                             }

                         </p>


                         <footer>

                             <div class="pull-left">
                                 @foreach (var tag in article.Tags)
                                 {
                                     @Html.ActionLink(tag.Name, "List", "Tag", new {@id = tag.Id}, new {@class = "btn btn-default btn-xs"})
                                 }
                             </div>
                             <small class="author pull-right">
                                 --author @article.Author.FullName
                             </small>
                         </footer>
                     </article>
                 </div>
             }
        }
        
    </div>
</div>
<hr />
